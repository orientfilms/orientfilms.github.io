(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?module.exports=c(require("jquery")):c(jQuery)})(function(c){var b={init:function(a){a=c.extend({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",
overlayParentElement:"body"},a);var d=b.supportCheck.call(this,a);if(!d&&0<a.unSupportCss.length&&(!d||!this.length))return"console"in window||(window.console={},window.console.log=function(a){return a}),this.length||console.log("Animsition: Element does not exist on page."),d||console.log("Animsition: Does not support this browser."),b.destroy.call(this);b.optionCheck.call(this,a)&&b.addOverlay.call(this,a);a.loading&&b.addLoading.call(this,a);return this.each(function(){var e=this,d=c(this),g=c(window);
d.data("animsition")||(a=c.extend({},a),d.data("animsition",{options:a}),g.on("load.animsition pageshow.animsition",function(){b.pageIn.call(e)}),g.on("unload.animsition",function(){}),c(a.linkElement).on("click.animsition",function(a){a.preventDefault();var d=c(this),f=d.attr("href");2===a.which||a.metaKey||a.shiftKey||-1!==navigator.platform.toUpperCase().indexOf("WIN")&&a.ctrlKey?window.open(f,"_blank"):b.pageOut.call(e,d,f)}))})},addOverlay:function(a){c(a.overlayParentElement).prepend('<div class="'+
a.overlayClass+'"></div>')},addLoading:function(a){c(a.loadingParentElement).append('<div class="'+a.loadingClass+'"></div>')},removeLoading:function(){var a=c(this).data("animsition").options;c(a.loadingParentElement).children("."+a.loadingClass).fadeOut().remove()},supportCheck:function(a){var d=c(this);a=a.unSupportCss;var e=a.length,f=!1;0===e&&(f=!0);for(var b=0;b<e;b++)if("string"===typeof d.css(a[b])){f=!0;break}return f},optionCheck:function(a){var d=c(this);return a.overlay||d.data("animsition-overlay")?
!0:!1},animationCheck:function(a,d,e){var b=c(this).data("animsition").options,g=typeof a,h=d&&"string"===g&&0<a.length;!d&&"number"===g||h||(d&&e?a=b.inClass:!d&&e?a=b.inDuration:d&&!e?a=b.outClass:d||e||(a=b.outDuration));return a},pageIn:function(){var a=c(this),d=a.data("animsition").options,e=a.data("animsition-in-duration"),a=a.data("animsition-in"),e=b.animationCheck.call(this,e,!1,!0),a=b.animationCheck.call(this,a,!0,!0),f=b.optionCheck.call(this,d);d.loading&&b.removeLoading.call(this);
f?b.pageInOverlay.call(this,a,e):b.pageInBasic.call(this,a,e)},pageInBasic:function(a,d){var e=c(this);e.trigger("animsition.start").css({"animation-duration":d/1E3+"s"}).addClass(a).animateCallback(function(){e.removeClass(a).css({opacity:1}).trigger("animsition.end")})},pageInOverlay:function(a,d){var e=c(this),b=e.data("animsition").options;e.trigger("animsition.start").css({opacity:1});c(b.overlayParentElement).children("."+b.overlayClass).css({"animation-duration":d/1E3+"s"}).addClass(a).animateCallback(function(){e.trigger("animsition.end")})},
pageOut:function(a,d){var e=c(this),f=e.data("animsition").options,g=a.data("animsition-out"),h=e.data("animsition-out"),k=a.data("animsition-out-duration"),e=e.data("animsition-out-duration"),k=k?k:e,g=b.animationCheck.call(this,g?g:h,!0,!1),h=b.animationCheck.call(this,k,!1,!1);b.optionCheck.call(this,f)?b.pageOutOverlay.call(this,g,h,d):b.pageOutBasic.call(this,g,h,d)},pageOutBasic:function(a,b,e){c(this).css({"animation-duration":b/1E3+"s"}).addClass(a).animateCallback(function(){location.href=
e})},pageOutOverlay:function(a,d,e){var f=c(this),g=f.data("animsition").options,f=f.data("animsition-in"),f=b.animationCheck.call(this,f,!0,!0);c(g.overlayParentElement).children("."+g.overlayClass).css({"animation-duration":d/1E3+"s"}).removeClass(f).addClass(a).animateCallback(function(){location.href=e})},destroy:function(){return this.each(function(){var a=c(this);c(window).unbind(".animsition");a.css({opacity:1}).removeData("animsition")})}};c.fn.animateCallback=function(a){return this.each(function(){c(this).bind("animationend webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd",
function(){c(this).unbind("animationend webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd");return a.call(this)})})};c.fn.animsition=function(a){if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)c.error("Method "+a+" does not exist on jQuery.animsition");else return b.init.apply(this,arguments)}});